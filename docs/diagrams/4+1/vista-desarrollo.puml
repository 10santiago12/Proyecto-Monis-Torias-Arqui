@startuml vista-desarrollo
title Vista de Desarrollo - Arquitectura de Módulos

skinparam packageStyle rectangle
skinparam backgroundColor #FEFEFE

package "Frontend\n(React + TypeScript)" as Frontend {
  [Pages Layer] as Pages
  [Auth Context] as AuthCtx
  [API Service] as APIService
  [Routing] as Routes
}

package "Backend\n(Node.js + Express)" as Backend {
  [API Routes] as APIRoutes
  [Middlewares] as Middlewares
  [Services] as Services
  [Repositories] as Repos
}

package "Testing" as Testing {
  [Unit Tests] as UnitTests
  [E2E Tests] as E2ETests
  [API Tests] as APITests
}

package "CI/CD" as CICD {
  [GitHub Actions] as GHA
  [Security Scans] as SecScans
}

cloud "Firebase" as Firebase {
  database "Firestore" as DB
  [Authentication] as Auth
  [Cloud Functions] as Functions
}

' Dependencias principales
Pages --> AuthCtx
Pages --> APIService
Routes --> AuthCtx
APIService --> APIRoutes : HTTP/REST

APIRoutes --> Middlewares
Middlewares --> Services
Services --> Repos
Repos --> DB

UnitTests --> Services
E2ETests --> Frontend
APITests --> Backend

GHA --> UnitTests : ejecuta
GHA --> E2ETests : ejecuta
GHA --> SecScans : ejecuta
GHA --> Functions : despliega

Middlewares --> Auth : verifica tokens

note right of Backend
  **Patrón:**
  Routes → Middlewares → Services → Repos
  
  Aplica principios SOLID
  y Repository Pattern
end note

note left of Frontend
  **Stack:**
  React 19 + TypeScript
  Vite 7 + React Router
  
  Context API para estado
end note

note bottom of CICD
  **Pipeline:**
  Tests → Scans → Build → Deploy
  80%+ cobertura requerida
end note

@enduml
