@startuml vista-procesos
title Vista de Procesos - Flujo de Sesión

actor Estudiante as student
actor Tutor as tutor

participant "Frontend" as frontend
participant "API" as api
participant "Auth MW" as auth
participant "Service" as service
database "Firestore" as db
participant "FCM" as fcm

== Solicitud de Sesión ==

student -> frontend: Solicita sesión
frontend -> api: POST /sessions + JWT
api -> auth: verifyToken()
api -> service: requestSession()
service -> db: Crear sesión
service -> fcm: Notificar tutor
fcm ->> tutor: Nueva solicitud
service --> api: sessionId
api --> frontend: 201 Created
frontend --> student: Sesión solicitada

== Confirmación ==

tutor -> frontend: Confirma sesión
frontend -> api: POST /sessions/:id/confirm + JWT
api -> auth: verifyToken()
api -> service: confirmSession()
service -> db: Actualizar estado
service -> fcm: Notificar estudiante
fcm ->> student: Sesión confirmada
service --> api: success
api --> frontend: 200 OK
frontend --> tutor: Confirmado

@enduml
